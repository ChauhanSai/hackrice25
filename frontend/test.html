<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Speech to Text Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    #output {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ddd;
      min-height: 50px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>ðŸŽ¤ Speech to Text Demo</h2>
  <button id="startBtn">Start Listening</button>
  <button id="stopBtn">Stop</button>

  <div id="output">Transcript will appear here...</div>

  <script>
    const startBtn = document.getElementById("startBtn");
    const stopBtn = document.getElementById("stopBtn");
    const output = document.getElementById("output");

    let recognition;

    // Check browser support
    if ("webkitSpeechRecognition" in window) {
      recognition = new webkitSpeechRecognition();
    } else if ("SpeechRecognition" in window) {
      recognition = new SpeechRecognition();
    } else {
      alert("Speech Recognition not supported in this browser. Try Chrome or Edge.");
    }

    if (recognition) {
      recognition.continuous = true;       // keep listening until stopped
      recognition.interimResults = true;   // show partial (live) results
      recognition.lang = "en-US";

      recognition.onresult = (event) => {
        let transcript = "";
        for (let i = event.resultIndex; i < event.results.length; ++i) {
          transcript += event.results[i][0].transcript;
        }
        console.log("Transcript:", transcript);
        output.textContent = transcript;
      };

      recognition.onerror = (event) => {
        console.error("Speech recognition error:", event.error);
      };

      recognition.onend = () => {
        console.log("Speech recognition service disconnected");
      };

      startBtn.onclick = () => {
        recognition.start();
        console.log("Listening...");
        output.textContent = "Listening...";
      };

      stopBtn.onclick = () => {
        recognition.stop();
        console.log("Stopped listening");
      };
    }
  </script>
</body>
</html>